Gruppe-Mitglieder:
Mervenur Seyhan: 3115745
Reyhaneh Ozgoli: 3103822
Pascal-Klaus Theus: 3107673
Hossam Al Mustafa: 3053109

Relationales Schema:

-- Alle Attribute kleinschreiben?
Artikelangebot[{_AID_,Artikelname, Beschreibungstext, Preis, Artikelbild, Stueckzahl,User.Nickname}]

User[{_Nickname_,Name,E-Mail}]

Kaufvorgang [{_TransaktionsID_,Lieferadresse,Stueckzahl,}]

Wunschliste[{_WID_}]

Bewertung [{_bid_,rezension,anzahlSterne}]


schreiben[{_user.nickname_,_kaufvorgang.transaktionsID_,Bewertung.bid}]

erwerben [{_Artikelangebot.AID_ ,_User.Nickname_,_kaufvorgang.transaktionsID_}]

einfügen[{_Artikelangebot.AID_, Wunschliste.WID, _User.Nickname_ }]

entfernen[{_Artikelangebot.AID_, Wunschliste.WID, _User.Nickname_}]


 

CREATE TABLE-Statements:

CREATE TABLE user (
	nickname varchar(50) NOT NULL,
	name VARCHAR(50) NOT NULL,
  	email VARCHAR(50) NOT NULL UNIQUE,
  	PRIMARY KEY (nickname)
);

CREATE TABLE artikelangebot (
	aid SMALLINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	artikelname VARCHAR(50) NOT NULL,
	beschreibungstext CLOB(1M) NOT NULL,
	preis DECIMAL(10,2) NOT NULL,
	artikelbild BLOP, -- BLOB?
	stueckzahl SMALLINT NOT NULL CHECK(stueckzahl BETWEEN 0 AND 99),
	PRIMARY KEY (aid),
	FOREIGN KEY (user) REFERENCES user(nickname)
);

CREATE TABLE kaufvorgang (
	tranaktionsID SMALLINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	lieferadresse VARCHAR(100) NOT NULL,
	stueckzahl SMALLINT NOT NULL,
	anzahlSterne,
	rezension CLOB(1M), -- Wieso CLOB?
	PRIMARY KEY (aid),
	FOREIGN KEY (user) REFERENCES user(nickname)
	
);

CREATE TABLE bewertung (
  	bid SMALLINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  	rezension CLOB(1M) NOT NULL,
  	anzahlSterne SMALLINT NOT NULL CHECK (rating BETWEEN 1 AND 5),
  	PRIMARY KEY (bid)
);

CREATE TABLE wunschliste (
	user varchar(50) NOT NULL,
	artikelangebot SMALLINT NOT NULL,
	PRIMARY KEY (user,artikelangebot),
	FOREIGN KEY (user) REFERENCES user(nickname),
	FOREIGN KEY (artikelangebot) REFERENCES artikelangebot(aid)
);

CREATE TABLE erwerben (
	artikelangebot SMALLINT NOT NULL,
	user varchar(50) NOT NULL,
	kaufvorgang SMALLINT NOT NULL,
	PRIMARY KEY (artikelangebot, user, transaktionsID),
	FOREIGN KEY (user) REFERENCES user(nickname),
	FOREIGN KEY (kaufvorgang) REFERENCES kaufvorgang(transaktionId),
	FOREIGN KEY (artikelangebot) REFERENCES artikelangebot(aid) 
);

CREATE TABLE schreiben (
  	user SMALLINT NOT NULL,
  	kaufvorgang SMALLINT NOT NULL,
  	bewertung SMALLINT NOT NULL,
  	PRIMARY KEY (user, kaufvorgang),
  	FOREIGN KEY (user) REFERENCES user(bid),
  	FOREIGN KEY (kaufvorgang) REFERENCES kaufvorgang(transaktionsID),
  	FOREIGN KEY (bewertung) REFERENCES bewertung(bid)
);


--CREATE TABLE einfügen (
--	artikelangebot SMALLINT NOT NULL,
--	user SMALLINT NOT NULL,
--	wunschliste SMALLINT NOT NULL,
--	PRIMARY KEY (artikelangebot, user),
--	FOREIGN KEY (artikelangebot) REFERENCES artikelangebot(aid),
--	FOREIGN KEY (user) REFERENCES user(nickname),
--	FOREIGN KEY (wunschliste) REFERENCES wunschliste(wid) 
--);

--CREATE TABLE entfernen (
--	artikelangebot SMALLINT NOT NULL,
--	user SMALLINT NOT NULL,
--	wunschliste SMALLINT NOT NULL,
--	PRIMARY KEY (artikelangebot, user),
--	FOREIGN KEY (artikelangebot) REFERENCES artikelangebot(aid),
--	FOREIGN KEY (user) REFERENCES user(nickname),
--	FOREIGN KEY (wunschliste) REFERENCES wunschliste(wid) 
--);	



		
	